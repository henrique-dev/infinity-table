!function(b,a){"object"==typeof exports&&"undefined"!=typeof module?a(exports):"function"==typeof define&&define.amd?define(["exports"],a):a((b="undefined"!=typeof globalThis?globalThis:b||self).ITable={})}(this,a=>{let b=function(c,...a){let d=a.length>0&& void 0!==a[0]?a[0]:{};return new b.InfinityTable(c,d)},d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=0,x=0,y=0,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N=5,O,P;function Q(){m=f.getBoundingClientRect().width,n=f.getBoundingClientRect().height,o=e.getBoundingClientRect().width,p=e.getBoundingClientRect().height,H<=0&&(H=parseInt(n/k,10))}function R(){let a=document.createElement("div");a.style.visibility="hidden",a.style.width="100px",a.style.msOverflowStyle="scrollbar",document.body.appendChild(a);let c=a.offsetWidth;a.style.overflow="scroll";let b=document.createElement("div");b.style.width="100%",a.appendChild(b);let d=b.offsetWidth;return a.parentNode.removeChild(a),c-d}function S(){let g=R(),a=document.createElement("div");a.style.position="absolute",a.style["overflow-y"]="hidden",a.style["overflow-x"]="hidden",a.style.width=`${m-g}px`,a.style.height=`${n-g}px`,a.style.left="0px",a.style.top=`${e.getBoundingClientRect().height}`,f.appendChild(a);let b=document.createElement("table");b.style.position="absolute",b.style.width="100%",b.classList=e.classList;let c=document.createElement("thead");null!=e.tHead&&(c.innerHTML=e.tHead.innerHTML),b.appendChild(c);let d=document.createElement("tbody");if(h.length>0){let j=d.insertRow(-1);j.style.height=`${k}px`,i(j,h[20],-1)}b.appendChild(d),a.appendChild(b);let l={tableHeight:b.getBoundingClientRect().height,tableWidth:b.getBoundingClientRect().width,theadHeight:c.getBoundingClientRect().height,tbodyHeight:d.getBoundingClientRect().height,rowHeight:d.getBoundingClientRect().height,estimatedRowHeight:b.getBoundingClientRect().height-c.getBoundingClientRect().height};return f.removeChild(a),l}function T(a,b){return a.filter(a=>!b.includes(a))}function U(d){let e=parseInt(N/2,10),a=d-e;a=a<0?0:a;let b=d+e;b=b>=L-1?L-1:b;let f=[];for(let c=a;c<=b;c+=1)f.push(c);return f}function V(a){a.forEach(a=>{let b=Array.from(document.getElementsByClassName(`its-${a}`));b.forEach(a=>A.removeChild(a))})}function W(a,b=!1){return b?a.map(a=>a).reverse():a}function X(a,b,c=!1){a.forEach(a=>{Object.prototype.hasOwnProperty.call(O,a)&&(W(O[a],c).forEach(d=>{let c=A.insertRow(b);c.style.height=`${k}px`,c.classList.add(`its-${a}`),c.classList.add("its-tr"),i(c,d,a)||A.deleteRow(c.rowIndex)}),j())})}function Y(){let a=0;K>1&&(a=I.map(a=>a).shift()*H*l),g.scroll(g.scrollLeft,C.scrollTop-a),P.y=C.scrollTop/v}function Z(){let a=K-M;if(a>0){if(1===Math.abs(a)){let b=Array.from(document.querySelectorAll(`.its-${J.map(a=>a).pop()}`)).pop(),c=T(J,I),d=T(I,J);V(c),X(d,b.rowIndex,!0)}if(Math.abs(a)>1){let e=J,f=I;V(e),X(f,-1),Y()}}if(a<0){if(1===Math.abs(a)){let g=Array.from(document.querySelectorAll(`.its-${J.map(a=>a).shift()}`)).shift(),h=T(J,I),i=T(I,J);V(h),X(i,g.rowIndex-1,!0)}if(Math.abs(a)>1){let j=J,k=I;V(j),X(k,-1),Y()}}}function $(){let a=0;K>1&&(a=J.map(a=>a).shift()*H*l),g.scroll(this.scrollLeft,this.scrollTop-a),P.y=this.scrollTop/v,K=parseInt((this.scrollTop+P.height/2)/(H*l),10),T(J,I)&&(I=U(K),Z(),J=I),M=K}function _(){g.scroll(this.scrollLeft,this.scrollTop),P.x=this.scrollLeft/u}function aa(){w=R();let a=S();l=a.estimatedRowHeight,t=h.length*l+a.theadHeight,s=a.tableWidth,q=m-w,r=n-w,x=q,y=r,v=t/y,u=s/x,f.style.position="relative",g=document.createElement("div"),g.style.position="absolute",g.style["overflow-y"]="hidden",g.style["overflow-x"]="hidden",g.style.width=`${q}px`,g.style.height=`${r}px`,g.style.left="0px",g.style.top=`${e.getBoundingClientRect().height}`,f.appendChild(g),z=document.createElement("table"),z.style.position="absolute",z.style.width="100%",z.classList=e.classList,null!=e.tHead&&((B=document.createElement("thead")).innerHTML=e.tHead.innerHTML,z.appendChild(B)),g.appendChild(z),C=document.createElement("div"),C.style.position="absolute",C.style.right="0px",C.style.top=`${e.getBoundingClientRect().height}`,C.style.height=`${y}px`,C.style["overflow-y"]="scroll",D=document.createElement("div"),D.style.width="1px",D.style.height=`${t}px`,C.appendChild(D),f.appendChild(C),E=document.createElement("div"),E.style.position="absolute",E.style.left="0px",E.style.top=`${r-1}px`,E.style.width=`${x}px`,E.style["overflow-x"]="scroll",F=document.createElement("div"),F.style.height="1px",F.style.width=`${s}px`,E.appendChild(F),f.appendChild(E),G=document.createElement("div"),G.style.position="absolute",G.style.right="0px",G.style.bottom="0px",G.style.background="#dcdcdc",G.style.width=`${w}px`,G.style.height=`${w}px`,f.appendChild(G),f.style.overflow="hidden"}function ab(){J=I=U(0),M=0,K=0,L=parseInt(h.length/H,10)+(h.length%H!=0?1:0),P={x:0,y:0,width:q,height:r},O={},A=document.createElement("tbody"),h.forEach((d,a)=>{let c=h[a];if(a<3*H){let b=A.insertRow(-1);b.style.height=`${k}px`,b.classList.add(`its-${parseInt(a/H,10)}`),b.classList.add("its-tr"),i(b,c,parseInt(a/H,10))||A.removeChild(A.lastChild)}null==O[parseInt(a/H,10)]&&(O[parseInt(a/H,10)]=[]),O[parseInt(a/H,10)].push(c)}),z.appendChild(A),C.addEventListener("scroll",$,!1),E.addEventListener("scroll",_,!1),e.style.display="none"}function ac(b){let a={debug:!1,elements:[],onRenderTr:a=>a,onRenderStack:a=>a,rowHeight:0,stackAmount:0,...b};d=a.debug,h=a.elements,i=a.onRenderTr,j=a.onRenderStack,k=a.rowHeight,H=a.stackAmount}function ad(a){return"TABLE"===a.tagName}function ae(){Q(),aa(),ab()}function af(){null!=g&&(f.removeChild(g),g=null),null!=C&&(f.removeChild(C),C=null),null!=E&&(f.removeChild(E),E=null),null!=G&&(f.removeChild(G),G=null),ae()}let c=function(a,b){ad(a)&&(f=(e=a).closest("div"),ac(b),ae(),window.addEventListener("resize",af,!1))};b.InfinityTable=c;try{globalThis.ITable=b}catch(ag){}a.InfinityTable=c,a.default=b,Object.defineProperty(a,"__esModule",{value:!0})})
